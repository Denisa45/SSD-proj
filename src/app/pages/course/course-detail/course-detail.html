<div *ngIf="course; else loading" class="course-detail-container">
  <!-- Header -->
  <div class="course-header">
    <h2 class="course-title">{{ course.name }}</h2>
    <p class="course-desc">
      {{ course.description || 'No description available.' }}
    </p>

    <div class="course-actions">
      <button class="btn edit" (click)="editCourse()">
        âœï¸ Edit
      </button>
      <button class="btn delete" (click)="deleteCourse()">
        ğŸ—‘ï¸ Delete
      </button>
    </div>
  </div>

  <!-- Tasks Section -->
  <div class="tasks-section">
    <h3>
      Tasks
      <span class="progress">
        {{ completedTasksCount }} / {{ totalTasksCount }} completed
      </span>
    </h3>

    <ul class="task-list" *ngIf="course.tasks && course.tasks.length > 0; else noTasks">
      <li
        *ngFor="let task of course.tasks"
        class="task-item"
        [class.done]="task.done"
      >
        <label>
          <input
            type="checkbox"
            [checked]="task.done"
            (change)="toggleTask(task.name)"
          />
          <span>{{ task.name }}</span>
        </label>
        <button class="delete-task-btn" (click)="removeTask(task.name)">
          âœ–
        </button>
      </li>
    </ul>

    <ng-template #noTasks>
      <p class="empty-tasks">No tasks yet. Add your first one below!</p>
    </ng-template>

    <div class="add-task">
      <input
        type="text"
        [(ngModel)]="newTask"
        placeholder="Enter new task..."
      />
      <button (click)="addTask()" class="btn add">â• Add Task</button>
    </div>
  </div>
    <!-- Materials Section -->
  <div class="materials-section" *ngIf="course.materials?.length">
  <h3>ğŸ“š Materials</h3>
  <ul class="material-list">
    <li *ngFor="let mat of course.materials">
      <a [href]="'http://localhost:3000' + mat.url" target="_blank" download>
        {{ mat.name }}
      </a>
      <button class="btn-icon delete" (click)="removeMaterial(mat.name)">âœ–</button>
    </li>
  </ul>
</div>


  <!-- Upload New Material -->
  <div class="upload-material">
  <input type="file" #fileInput />
  <button (click)="uploadMaterial(fileInput.files)">Upload File</button>
  </div>



</div>

<ng-template #loading>
  <div class="loading">
    <p>Loading course details...</p>
  </div>
</ng-template>
