<div *ngIf="course; else loading" class="course-detail-container">
  <!-- Header -->
  <div class="course-header">
    <h2 class="course-title">{{ course.name }}</h2>
    <p class="course-desc">
      {{ course.description || 'No description available.' }}
    </p>

    <div class="course-actions">
      <button class="btn edit" (click)="editCourse()">
        âœï¸ Edit
      </button>
      <button class="btn delete" (click)="deleteCourse()">
        ğŸ—‘ï¸ Delete
      </button>
    </div>
  </div>

  <!-- Tasks Section -->
  <div class="tasks-section">
    <h3>
      Tasks
      <span class="progress">
        {{ completedTasksCount }} / {{ totalTasksCount }} completed
      </span>
    </h3>

    <ul class="task-list" *ngIf="course.tasks && course.tasks.length > 0; else noTasks">
      <li
        *ngFor="let task of course.tasks"
        class="task-item"
        [class.done]="task.done"
      >
        <label>
          <input
            type="checkbox"
            [checked]="task.done"
            (change)="toggleTask(task.name)"
          />
          <span>{{ task.name }}</span>
        </label>
        <button class="delete-task-btn" (click)="removeTask(task.name)">
          âœ–
        </button>
      </li>
    </ul>

    <ng-template #noTasks>
      <p class="empty-tasks">No tasks yet. Add your first one below!</p>
    </ng-template>

    <div class="add-task">
      <input
        type="text"
        [(ngModel)]="newTask"
        placeholder="Enter new task..."
      />
      <button (click)="addTask()" class="btn add">â• Add Task</button>
    </div>
  </div>
  <section class="materials-section">
    <h3>ğŸ“š Materials</h3>

    <div class="upload-box">
      <input type="file" (change)="onFileSelected($event)" accept=".pdf,.doc,.ppt,.png,.jpg" />
      <button class="btn upload" (click)="uploadFile()">â¬†ï¸ Upload</button>
    </div>

    <ul *ngIf="course.materials?.length; else noMaterials" class="material-list">
      <li *ngFor="let mat of course.materials" class="material-item">
        <a [href]="mat.url" target="_blank">{{ mat.name }}</a>
        <button class="btn-icon delete" (click)="removeMaterial(mat.name)">âœ–</button>
      </li>
    </ul>

    <ng-template #noMaterials>
      <p class="empty-msg">No materials uploaded yet.</p>
    </ng-template>
  </section>

</div>

<ng-template #loading>
  <div class="loading">
    <p>Loading course details...</p>
  </div>
</ng-template>
